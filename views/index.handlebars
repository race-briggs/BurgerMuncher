<h1>Burget Muncher</h1>

<h3>A list of delicious things between bread for you to take a byte out of!</h3>

<hr>

<h2>Uneaten Burgers</h2>

<ul class="uneaten">
  {{#each burgers}}
    {{#unless devoured}}
      {{> burgers/burger-block devoured=false}}
    {{/unless}}
  {{/each}}
</ul>

<h2>DEVOURED BURGERS</h2>

<ul class="devoured-ul">
  {{#each burgers}}
    {{#if devoured}}
      {{> burgers/burger-block devoured=true}}
    {{/if}}
  {{/each}}
</ul>

<hr>

<h2>Add a Burger</h2>

<form class="add-burger">
  <div class="form-div">
    <label for="burg-name">Burger Name:</label>
    <input type="text" id="burg-name" name="burger_name">
  </div>
  <div class="form-div">
    <label for="devoured">DEVOURED?</label>
    <input type="radio" name="devoured" value="1">DEVOURED <br>
    <input type="radio" name="devoured" value="0" checked>not DEVOURED... yet <br>
  </div>

  <button type="submit" class="new-burger-btn">Add Burger</button>
</form>

<script>
  $(function(){

    $('.devour-btn').on('click', function(event){
      event.preventDefault();

      var id = $(this.data("id"));
      var gotEaten = $(this.data('newdevoured'));

      var getEaten = {
        devoured = gotEaten
      };

      $.ajax('/api/burgers/' + id, {
        type: "PUT",
        data: gotEaten
      }).then(function(){
        console.log('BURGER DEVOURED');
        location.reload();
      });
    });

    $('add-burger').on('submit', function(event){
      event.preventDefault();

      var newBurger = {
        burger_name: $('#burg-name').val().trim(),
        devoured: $('[name=devoured]:checked').val()
      };

      $.post('/api/burgers', newBurger).then(function(){
        console.log('BURGER UP!');
        location.reload();
      })
    })

  })
</script>